function fb_og_load_sidebar(){FB.getLoginStatus(function(e){fb_og_is_logged_in=!0,e.status==="connected"?FB.api("/me",function(e){fb_og_user=e;var t="action=fb_og_actions_hook&type=get_sidebar&fb_id="+fb_og_user.id+"&fb_name="+fb_og_user.name;jQuery.ajax({type:"POST",url:fb_og_actions.ajaxurl,data:t,cache:!1,success:function(e){jQuery("#fbPublish").html(e),jQuery("#fbPublish").fadeIn("medium"),parent.fbOgActionsResizeIframe("fb-og-actions-sidebar-iframe",jQuery("#fbPublish").height()+10)}})}):(fb_og_is_logged_in=!1,jQuery("#fbLogin").fadeIn("medium"))})}function fb_og_toggle_publishing(e){var t="action=fb_og_actions_hook&type=toggle_publishing&fb_id="+fb_og_user.id+"&publishing="+e;jQuery.ajax({type:"POST",url:fb_og_actions.ajaxurl,data:t,cache:!1,success:function(e){console.log(e)}})}function fb_og_load_friends_who_read_this(e){FB.getLoginStatus(function(t){fb_og_is_logged_in=!0,t.status==="connected"&&FB.api("/me",function(t){fb_og_user=t,FB.api("/me/friends",function(t){var n=JSON.stringify(t.data),r="action=fb_og_actions_hook&type=get_friends_who_read_this&post_id="+e+"&fb_id="+fb_og_user.id+"&fb_name="+fb_og_user.name+"&friends="+n;jQuery.ajax({type:"POST",url:fb_og_actions.ajaxurl,data:r,success:function(e){jQuery("#fb-og-reads").html(e),jQuery("#fb-og-loading").hide(),jQuery("#fb-og-reads").fadeIn("medium")}})})})})}function fb_og_load_friends_activity(){FB.getLoginStatus(function(e){fb_og_is_logged_in=!0,e.status==="connected"&&FB.api("/me",function(e){fb_og_user=e,FB.api("/me/friends",function(e){var t=JSON.stringify(e.data),n="action=fb_og_actions_hook&type=get_friends_activity&fb_id="+fb_og_user.id+"&fb_name="+fb_og_user.name+"&friends="+t;jQuery.ajax({type:"POST",url:fb_og_actions.ajaxurl,data:n,success:function(e){jQuery("#fb-og-activity").html(e);var t=jQuery("h3#fb-og-activity-heading").height()+10,n=jQuery(window).height()-t-4;jQuery("#fb-og-activity").height(n),jQuery("#fb-og-activity").fadeIn("medium",function(){jQuery("#fb-og-activity").css("overflow","auto"),jQuery("#fb-og-activity").jScrollPane()}),jQuery("h3#fb-og-activity-heading").fadeIn("medium")}})})})})}function fb_og_do_action(e,t,n){if(!fb_og_is_logged_in)return;var r="action=fb_og_actions_hook&type=is_publishing&fb_id="+fb_og_user.id;jQuery.ajax({type:"POST",url:fb_og_actions.ajaxurl,data:r,cache:!1,success:function(r){r==1&&fb_og_send_action_call(e,t,n)}})}function fb_og_send_action_call(e,t,n){var r=window.location.protocol,i="/me/"+n+"?article="+r+"//"+e;FB.api(i,"post",function(e){if(e.id){console.log(e);var n="action=fb_og_actions_hook&type=store_read&fb_id="+fb_og_user.id+"&action_id="+e.id+"&post_id="+t;jQuery.ajax({type:"POST",url:fb_og_actions.ajaxurl,data:n,cache:!1})}else e.error&&console.log(e.error)})}var fb_og_is_logged_in,fb_og_user;jQuery("#fbLogin img").live("click",function(){jQuery(this).css("opacity",.7),FB.login(function(e){e.authResponse&&window.parent.location.reload()},{scope:"publish_actions"})}),jQuery("#fb_logout a").live("click",function(){FB.logout(function(e){window.parent.location.reload()})}),jQuery("#fbToggleOn a.fbPublishing").live("click",function(){jQuery("#fbToggleOn").hide(),jQuery("#fbToggleOff").show(),fb_og_toggle_publishing(0)}),jQuery("#fbToggleOff a.fbPublishing").live("click",function(){jQuery("#fbToggleOff").hide(),jQuery("#fbToggleOn").show(),fb_og_toggle_publishing(1)}),jQuery(".fbToggle a.fbToggleActivity").live("click",function(){jQuery("#fbRead").show(),jQuery("#fbRead img.loading").show(),jQuery("#fbRead .meta").hide(),jQuery("#fbRead ul").html(""),parent.fbOgActionsResizeIframe("fb-og-actions-sidebar-iframe",jQuery("#fbPublish").height()+75),FB.api("/me/news.reads",function(e){var t=0,n="",r=e.data;while(t<r.length)n+='<li><a id="'+r[t].id+'" class="fbDelete"></a><a class="fbReadItem" href="'+r[t].data.article.url+'" target="_parent">'+r[t].data.article.title+"</a></li>",t++;jQuery("#fbRead ul").html(n),jQuery("#fbRead img.loading").hide(),parent.fbOgActionsResizeIframe("fb-og-actions-sidebar-iframe",jQuery("#fbPublish").height()+jQuery("#fbRead ul").height()+15)})}),jQuery("#fbRead a.fbDelete").live("click",function(){var e=jQuery(this).attr("id"),t=jQuery(this).closest("li");t.fadeOut("medium",function(){t.remove()}),FB.api("/"+e,"delete",function(t){if(t==1){var n="action=fb_og_actions_hook&type=delete_read&action_id="+e;console.log(n),jQuery.ajax({type:"POST",url:fb_og_actions.ajaxurl,data:n,cache:!1,success:function(e){console.log(e)}})}})});